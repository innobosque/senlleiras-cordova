import{z as A,k as b,g as z,o as c,c as d,p as E,t as C,b as e,s as q,d as y,q as m,B as _,i as L,F as V,T as N,r as G,e as I,f as M,U as O,V as X,x as j,y as H,l as J}from"./index.90139639.js";import{T}from"./TheUploader.4775a76a.js";/* empty css                      */import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";const K={key:0,class:"especies_alert especies_loaded"},P={key:1,class:"especies_alert especies_error"},Q={class:"form-container"},W=["onSubmit"],Y={class:"data_especies"},Z=e("h2",null,"Cargar Especie",-1),ee={class:"label_nombre"},oe=e("label",{for:"nombre_comun"},"Nombre com\xFAn - Castellano",-1),se={class:"label_nombre"},ae=e("label",{for:"nombre_comun_gal"},"Nombre com\xFAn - Gallego",-1),te={class:"label_nombre"},ne={key:0,style:{color:"white","background-color":"red","font-weight":"bold","font-size":"large"},class:"error"},le={key:0,class:"spinner"},re=e("input",{type:"submit",value:"Cargar Especie"},null,-1),ie={__name:"FormAdminEspecies",emits:["cerrarFormulario"],setup(x,{emit:g}){const k=A(),v=b(!1),h=b(!1),i=b({error:!1,message:"erroooorr"});let w=null;const a=z({genero:"",especie:"",nombre_comun:"",nombre_comun_gal:"",origen_descripcion:"",usos:"",curiosidades:"",urlfotos:""}),n=()=>{a.genero="",a.especie="",a.nombre_comun="",a.nombre_comun_gal="",a.origen_descripcion="",a.usos="",a.curiosidades="",a.urlfotos=""},F=async u=>{try{i.value={error:!1,message:""},w=u}catch(t){i.value.error=!0,i.value.message=t.message}},D=async(u,t,$="especies")=>{try{i.value={error:!1,message:""},h.value=!0,v.value=!0;for(let l=0,r=u.length;l<r;l++)await k.subirFoto({ref:`${$}/${t}`,file:u[l]});h.value=!1,n()}catch(l){i.value.error=!0,i.value.message=l.message}finally{v.value=!1}},U=async()=>{const u=await k.loadEspecie(a);if(w!==null&&u.id){const t=`especies/${u.id}/${w[0].name}`;console.log(t),await N(u.id,"Especies",{urlfotos:t}),await D(w,u.id),u&&g("cerrarFormulario")}};return(u,t)=>{const $=G("icono");return c(),d(V,null,[v.value?(c(),d("div",K,"Cargando...")):E("",!0),i.value.error?(c(),d("div",P,C(i.value.message),1)):E("",!0),e("div",Q,[e("form",{id:"especies",onSubmit:q(U,["prevent"])},[y($,{class:"close-form",icon:["fa","xmark"],onClick:t[0]||(t[0]=l=>u.$emit("cerrarFormulario"))}),e("fieldset",Y,[Z,m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.genero=l),type:"text",id:"genero",placeholder:"G\xE9nero",required:""},null,512),[[_,a.genero,void 0,{trim:!0}]]),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.especie=l),type:"text",id:"especie",placeholder:"Especie",required:""},null,512),[[_,a.especie,void 0,{trim:!0}]]),e("span",ee,[oe,m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>a.nombre_comun=l),type:"text",id:"nombre_comun",name:"nombre_comun",placeholder:"(Castellano)",required:""},null,512),[[_,a.nombre_comun]])]),e("span",se,[ae,m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.nombre_comun_gal=l),type:"text",name:"nombre_comun_gal",id:"nombre_comun_gal",placeholder:"(Gallego)"},null,512),[[_,a.nombre_comun_gal]])]),m(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>a.origen_descripcion=l),name:"origen",id:"origen_descripcion",cols:"30",rows:"10",placeholder:"Origen y descripci\xF3n"},null,512),[[_,a.origen_descripcion]]),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>a.usos=l),name:"usos",id:"usos",cols:"30",rows:"10",placeholder:"usos"},null,512),[[_,a.usos]]),m(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=l=>a.curiosidades=l),name:"curiosidades",id:"curisosidades",cols:"30",rows:"10",placeholder:"Curiosidades"},null,512),[[_,a.curiosidades]]),e("span",te,[y(T,{required:!0,onEmitirFichero:F}),i.value.error?(c(),d("div",ne,[h.value?(c(),d("div",le,"Cargando....")):E("",!0),L(" "+C(i.value.message),1)])):E("",!0)]),re])],40,W)])],64)}}};const p=x=>(j("data-v-160e99fa"),x=x(),H(),x),ce={class:"tabla_datos_administrativo"},ue={class:"header_administrativo"},de=p(()=>e("td",{class:"genero"},"Especie",-1)),me=p(()=>e("td",{class:"nombre_comun"},"Nome Com\xFAn (castelan/galego)",-1)),_e={class:"tabla_administrativo_options"},pe={class:"genero"},ve={class:"nombre_comun"},ge={class:"tabla_administrativo_options"},fe=["onClick"],be={key:0,class:"alerta_container"},he={class:"alerta_borrar_especie"},ye=p(()=>e("h2",null,"Atenci\xF3n",-1)),$e={class:"borrar_txt"},Ee=p(()=>e("p",null," !Todas las senlleiras que contentan esta especie se ver\xE1n afectadas! ",-1)),Ce={class:"borrar_btn"},xe={key:1,class:"form-container"},ke={class:"data_especies"},we=p(()=>e("h2",null,"Editar Especies",-1)),Ue=p(()=>e("label",{for:"genero"},"X\xE9nero",-1)),Ve=p(()=>e("label",{for:"especie"},"Especie",-1)),Fe=p(()=>e("label",{for:"nombre_comun"},"Nome com\xFAn - (Castel\xE1n)",-1)),De=p(()=>e("label",{for:"nombre_comun_gal"},"Nome com\xFAn - (Galego)",-1)),Ne=p(()=>e("label",{for:"descripcion"},"Descrici\xF3n",-1)),Se=p(()=>e("label",{for:"usos"},"Usos",-1)),Ie=p(()=>e("label",{for:"curiosidades"},"Curiosidades",-1)),Ae={class:"editar-images"},qe=["src"],Ge=["onClick"],Te=p(()=>e("div",null,"Fotos da especie",-1)),Be=p(()=>e("input",{type:"submit",value:"Editar Especies"},null,-1)),Re={key:0},ze={__name:"AdminCatalogoEspecies",setup(x){const g=A();g.setEspecies().catch(r=>console.log(r));const k=b(""),v=b(!1);let h=null;const i=b(!1),w=({id:r,name:o})=>{h=r,k.value=o,i.value=!0},a=async()=>{h&&(await g.borrarEspecie(h),i.value=!1)},n=b(null),F=async r=>{const o=await O(`especies/${r.idDoc}`);$.value=[],o.forEach(async f=>{$.value.push({ref:f,src:await X(f)})}),n.value=r},D=async r=>{await N(r,"Especies",n.value);try{v.value=!0,await N(r,"Especies",n.value)}catch(o){console.log("aaaaah",o)}finally{v.value=!1}n.value=null},U=b(!1),u=async r=>{if(r){const o=r[0];try{U.value="",await g.subirFoto({ref:`especies/${n.value.idDoc}`,file:o})}catch(f){console.log(f),U.value=f.mensage}}},t=r=>{prompt(`para eliminar a foto confirme a referencia: ${r}`)===r&&g.borrarFoto(r)},$=b([]);return(async()=>{try{U.value="",$.value=await setImagenes("especies")}catch(r){U.value=r}})(),(r,o)=>{const f=G("icono");return c(),d(V,null,[e("table",ce,[e("tr",ue,[de,me,e("td",_e,[e("span",null,[y(f,{icon:["fa","gears"]})])])]),(c(!0),d(V,null,I(M(g).especies,(s,S)=>(c(),d("tr",{class:"catalogo_administrativo",key:S},[e("td",pe,C(s.genero)+" "+C(s.especie),1),e("td",ve,C(s.nombre_comun)+"/"+C(s.nombre_comun_gal),1),e("td",ge,[e("span",null,[y(f,{icon:["fa","trash"],onClick:R=>w({id:s.idDoc,name:`${s.genero} ${s.especie}`})},null,8,["onClick"]),e("button",{onClick:R=>F(s)},[y(f,{icon:["fa","pen"],to:"/arb-:id"})],8,fe)])])]))),128))]),i.value?(c(),d("div",be,[e("div",he,[ye,e("span",$e,[y(f,{icon:["fa","circle-exclamation"]}),e("p",null,"Se eliminar\xE1: "+C(k.value)+" de manera irrevesible",1),Ee]),e("span",Ce,[e("button",{onClick:a},"Eliminar"),e("button",{onClick:o[0]||(o[0]=s=>i.value=!1)},"Cancelar")])])])):E("",!0),n.value?(c(),d("div",xe,[e("form",{id:"especies",onSubmit:o[9]||(o[9]=q(s=>D(n.value.idDoc),["prevent"]))},[y(f,{class:"close-form",icon:["fa","xmark"],onClick:o[1]||(o[1]=s=>n.value=null)}),e("fieldset",ke,[we,Ue,m(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>n.value.genero=s),id:"genero",placeholder:"G\xE9nero"},null,512),[[_,n.value.genero]]),Ve,m(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>n.value.especie=s),id:"especie",placeholder:"Especie"},null,512),[[_,n.value.especie]]),Fe,m(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>n.value.nombre_comun=s),id:"nombre_comun",placeholder:"Nombre com\xFAn"},null,512),[[_,n.value.nombre_comun]]),De,m(e("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>n.value.nombre_comun_gal=s),id:"nombre_comun_gal",placeholder:"Nombre gallego"},null,512),[[_,n.value.nombre_comun_gal]]),Ne,m(e("textarea",{rows:"10","onUpdate:modelValue":o[6]||(o[6]=s=>n.value.origen_descripcion=s),id:"descripcion",placeholder:"Descripci\xF3n"},null,512),[[_,n.value.origen_descripcion]]),Se,m(e("textarea",{rows:"10","onUpdate:modelValue":o[7]||(o[7]=s=>n.value.usos=s),id:"usos",placeholder:"Usos"},null,512),[[_,n.value.usos]]),Ie,m(e("textarea",{rows:"10","onUpdate:modelValue":o[8]||(o[8]=s=>n.value.curiosidades=s),id:"curiosidades",placeholder:"Curiosidades"},null,512),[[_,n.value.curiosidades]]),e("fieldset",Ae,[(c(!0),d(V,null,I($.value,s=>(c(),d("div",{class:"images",key:s.ref},[e("img",{class:"image",src:s.src,alt:""},null,8,qe),e("button",{class:"btn-eliminar",onClick:S=>t(s.ref)}," Eliminar ",8,Ge)]))),128))]),Te,y(T,{onEmitirFichero:u}),Be,v.value?(c(),d("div",Re,"Gardando...")):E("",!0)])],32)])):E("",!0)],64)}}};var Le=B(ze,[["__scopeId","data-v-160e99fa"]]);const Me={__name:"CatalogoEspecies",setup(x){const g=b(!1);return(k,v)=>(c(),d("div",null,[e("button",{class:"admin-add",onClick:v[0]||(v[0]=h=>g.value=!0)},"A\xF1adir Especie"),g.value?(c(),J(ie,{key:0,onCerrarFormulario:v[1]||(v[1]=h=>g.value=!1)})):E("",!0),y(Le)]))}};var Je=B(Me,[["__scopeId","data-v-e61f36a6"]]);export{Je as default};
