import{a as q,k as l,P as x,c as a,b as o,t,F as h,e as v,p as b,Q as E,o as r,q as D,W as V,B as w,u as P}from"./index.90139639.js";const U={key:0,class:"parque"},C={class:"title"},B={class:"listado"},A={class:"item-nombre"},F={class:"item-numero"},M={key:0,class:"fichas"},N=["src"],R={class:"container"},S=["onUpdate:modelValue","value"],L={class:"input-number"},Q=["onUpdate:modelValue"],$={__name:"ParqueEspeciesView",setup(T){const _=E(),m=P(),u=q(),k=l([]),n=l(null),i=l([]),d=l([]),f=s=>{if(n.value.especies){const c=n.value.especies.find(e=>e.idDoc===s);if(c)return{checked:!0,numero:c.numero}}return{checked:!1,numero:0}},g=async()=>{if(confirm("De verdade que desexa eliminar as especies")&&n.value.idDoc)try{await u.deleteEspeciesParque(n.value.idDoc),m.push({name:"admin-parque"})}catch(s){console.log(s)}},y=async()=>{const s=i.value.reduce((c,e)=>(e.checked&&e.number>0&&c.push({idDoc:e.idDoc,genero:e.genero,especie:e.especie,numero:e.number}),c),[]);if(s.length)try{u.updateEspeciesParque(n.value.idDoc,s),m.push({name:"admin-parque"})}catch(c){console.log(c)}};return(async()=>{try{n.value=await u.getParque(_.params.idDoc),k.value=await u.getAllEspecies(),d.value=await x(`parquesficha/${_.params.idDoc}`),k.value.forEach(s=>{const c=f(s.idDoc);i.value.push({checked:c.checked,idDoc:s.idDoc,genero:s.genero,especie:s.especie,number:c.numero})})}catch(s){console.log(s)}})(),(s,c)=>n.value?(r(),a("div",U,[o("h1",C,t(n.value.nombre),1),o("button",{class:"button1",onClick:y},"Asignar especies"),o("button",{class:"button1",onClick:g},"Eliminar especies"),o("div",B,[o("ul",null,[(r(!0),a(h,null,v(n.value.especies,e=>(r(),a("li",{key:e.idDoc},[o("span",A,t(e.genero)+" "+t(e.especie),1),o("span",F,t(e.numero),1)]))),128))]),d.value.length?(r(),a("div",M,[(r(!0),a(h,null,v(d.value,e=>(r(),a("img",{key:e,src:e,alt:""},null,8,N))),128))])):b("",!0)]),o("div",R,[(r(!0),a(h,null,v(i.value,e=>(r(),a("div",{class:"formulario",key:e.idDoc},[o("div",null,[D(o("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":p=>e.checked=p,value:e.idDoc},null,8,S),[[V,e.checked]]),o("span",null,t(e.genero)+" "+t(e.especie),1)]),o("div",L,[D(o("input",{type:"number","onUpdate:modelValue":p=>e.number=p,class:"number"},null,8,Q),[[w,e.number]])])]))),128))])])):b("",!0)}};export{$ as default};
