import{A as I,a as L,k as v,r as B,o as d,c as u,b as e,d as h,F as x,e as V,t as c,f as E,p as q,q as i,B as p,C as P,W as z,i as y,s as G,U as W,V as X,T as j,x as H,y as J,g as K,z as O,D as Q,l as Y}from"./index.90139639.js";/* empty css                      */import{T as M}from"./TheUploader.4775a76a.js";import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";import{T as ee}from"./TheGeolocationComponent.62266f76.js";const r=D=>(H("data-v-31b95a06"),D=D(),J(),D),le=r(()=>e("div",null,[e("span",{class:"lenda"},"P: Proposta para senlleira"),y(". Coloca o \xE1rbore na Ficha senlleiras")],-1)),oe=r(()=>e("div",null,[e("span",{class:"lenda"},"S: Senlleira"),y(". Indica que a \xE1rbore est\xE1 no cat\xE1logo oficial de senlleiras")],-1)),ae=r(()=>e("div",null,[e("span",{class:"lenda"},"Pu: Publicado"),y(". Se o \xE1rbore aparece en zoa p\xFAblica")],-1)),se={class:"tabla_datos_administrativo"},ne={class:"header_administrativo"},te=r(()=>e("td",null,null,-1)),re=r(()=>e("td",null,"Nomes (cient\xEDfico,galego,castel\xE1n)",-1)),ie=r(()=>e("td",null,"Nome da \xE1rbore",-1)),de=r(()=>e("td",{title:"Propuesta senlleira"},[e("span",{class:"lenda"},"P")],-1)),ue=r(()=>e("td",{title:"Senlleira"},[e("span",{class:"lenda"},"S")],-1)),ce=r(()=>e("td",{title:"Senlleira"},[e("span",{class:"lenda"},"Pu")],-1)),pe=r(()=>e("td",null,"Ubicaci\xF3n parque",-1)),me={class:"tabla_administrativo_options"},_e={class:"tabla_administrativo_options"},be=["onClick"],fe={key:0,class:"alerta_container"},ve={class:"alerta_borrar_especie"},ge=r(()=>e("h2",null,"Atenci\xF3n",-1)),he={class:"borrar_txt"},ye=r(()=>e("p",null," !Todalas senlleiras que conte\xF1an esta especie veranse afectadas! ",-1)),$e={class:"borrar_btn"},xe={key:1,class:"form-container"},ke=r(()=>e("h2",null,"Editar Senlleiras",-1)),Se={class:"data_especies"},Ce=r(()=>e("legend",null,"Datos senlleira",-1)),Ue=r(()=>e("label",{for:"genero"}," X\xE9nero",-1)),Ve=r(()=>e("label",{for:"especie"}," Especie",-1)),qe=r(()=>e("label",{for:"nombre_comun"}," Nome com\xFAn (Castel\xE1n)",-1)),De=r(()=>e("label",{for:"nombre_comun_gal"}," Nome com\xFAn (Galego)",-1)),Ee=r(()=>e("label",{for:"nombre_arbol"}," Nome da \xE1rbore",-1)),ze=r(()=>e("label",{for:"altura"}," Altura",-1)),Ae=r(()=>e("label",{for:"diametroTronco"}," Per\xEDmetro do tronco",-1)),Pe=r(()=>e("legend",null,"Ubicaci\xF3n",-1)),Fe=r(()=>e("label",{for:"zona-geografica"}," Zona xeogr\xE1fica",-1)),we=r(()=>e("label",{for:"localizacion",class:"form-label"}," Ubicaci\xF3n parque",-1)),Ne=r(()=>e("option",{value:""},null,-1)),Te=["value"],Ie=r(()=>e("label",{for:"lat",class:"form-label"},"Latitude",-1)),Le=r(()=>e("label",{for:"lng",class:"form-label"},"Lonxitude",-1)),Be=r(()=>e("legend",null,"Descrici\xF3n",-1)),Ge=r(()=>e("label",{for:"descripcion"}," Descrici\xF3n",-1)),Me={class:"data-senlleira"},Re=r(()=>e("legend",null,"Esta \xE1rbore \xE9",-1)),Ze={class:"senlleira-arbore",style:{display:"flex",gap:".1rem"}},We=r(()=>e("label",{class:"form-label",for:"senlleira"},"Senlleira",-1)),Xe={class:"senlleira-arbore",style:{display:"flex",gap:".1rem"}},je=r(()=>e("label",{class:"form-label",for:"propSenlleira"},"Proposta de senlleira",-1)),He={class:"senlleira-arbore",style:{display:"flex",gap:".1rem"}},Je=r(()=>e("label",{class:"form-label",for:"publicado"},"Publicado",-1)),Ke={class:"editar-images"},Oe=["src"],Qe=["onClick"],Ye=["disabled"],el={key:0},ll={__name:"AdminCatalogoSenlleiras",setup(D){const _=I(),S=L();_.setArbores().catch(l=>console.log(l)),S.setParques();const $=v(""),s=v(!1);let C=null;const b=v(!1),U=v([]),A=({id:l,name:n})=>{C=l,$.value=n,b.value=!0},f=async()=>{C&&(await _.borrarArbore(C),b.value=!1)},g=l=>{prompt(`para eliminar la foto comnfirme la referencia:  ${l}`)===l&&_.borrarFoto(l)},t=v(null),F=async l=>{const n=await W(`Arbores/${l.idDoc}`);U.value=[],n.forEach(async a=>{U.value.push({ref:a,src:await X(a)})}),t.value=l},w=async l=>{try{s.value=!0,await j(l,"Arbores",t.value)}catch(n){console.log("aaaaah",n)}finally{s.value=!1}t.value=null},k=v(!1),N=async l=>{if(l){const n=l[0];try{k.value="",await _.subirFoto({ref:`Arbores/${t.value.idDoc}`,file:n})}catch(a){console.log(a),k.value=a.mensage}}};return(async()=>{try{k.value="",U.value=await setImagenes("Arbores")}catch(l){k.value=l}})(),(l,n)=>{const a=B("icono");return d(),u(x,null,[le,oe,ae,e("table",se,[e("tr",ne,[te,re,ie,de,ue,ce,pe,e("td",me,[e("span",null,[h(a,{icon:["fa","gears"]})])])]),(d(!0),u(x,null,V(E(_).arbores,(o,T)=>(d(),u("tr",{class:"catalogo_administrativo",key:T},[e("td",null,c(T+1),1),e("td",null,c(o.genero)+" "+c(o.especie)+","+c(o.nombre_comun)+","+c(o.nombre_comun_gal),1),e("td",null,c(o.nombre_arbol),1),e("td",null,c(o==null?void 0:o.propuesta_senlleira),1),e("td",null,c(o==null?void 0:o.senlleira),1),e("td",null,c(o==null?void 0:o.publicado),1),e("td",null,c(o.ubicacion_parque),1),e("td",_e,[e("span",null,[h(a,{icon:["fa","trash"],onClick:Z=>A({id:o.idDoc,name:`${o.genero} ${o.especie}`})},null,8,["onClick"]),e("button",{onClick:Z=>F(o)},[h(a,{icon:["fa","pen"]})],8,be)])])]))),128))]),b.value?(d(),u("div",fe,[e("div",ve,[ge,e("span",he,[h(a,{icon:["fa","circle-exclamation"]}),e("p",null,"Eliminarase "+c($.value)+" de maneira irrevesible",1),ye]),e("span",$e,[e("button",{onClick:f},"Eliminar"),e("button",{onClick:n[0]||(n[0]=o=>b.value=!1)},"Cancelar")])])])):q("",!0),t.value?(d(),u("div",xe,[e("form",{id:"senlleiras",onSubmit:n[18]||(n[18]=G(o=>w(`${t.value.idDoc}`),["prevent"]))},[h(a,{class:"close-form",icon:["fa","xmark"],onClick:n[1]||(n[1]=o=>t.value=null)}),ke,e("fieldset",Se,[Ce,Ue,i(e("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=o=>t.value.genero=o),id:"genero",placeholder:"G\xE9nero"},null,512),[[p,t.value.genero]]),Ve,i(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=o=>t.value.especie=o),id:"especie",placeholder:"Especie"},null,512),[[p,t.value.especie]]),qe,i(e("input",{type:"text","onUpdate:modelValue":n[4]||(n[4]=o=>t.value.nombre_comun=o),id:"nombre_comun",placeholder:"Nome en Castel\xE1n"},null,512),[[p,t.value.nombre_comun]]),De,i(e("input",{type:"text","onUpdate:modelValue":n[5]||(n[5]=o=>t.value.nombre_comun_gal=o),id:"nombre_comun_gal",placeholder:"Nome en Galego"},null,512),[[p,t.value.nombre_comun_gal]]),Ee,i(e("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=o=>t.value.nombre_arbol=o),id:"nombre_arbol",placeholder:"Nome da \xE1rbore"},null,512),[[p,t.value.nombre_arbol]]),ze,i(e("input",{type:"number","onUpdate:modelValue":n[7]||(n[7]=o=>t.value.altura=o),id:"altura",step:"any",placeholder:"Altura (metros)"},null,512),[[p,t.value.altura]]),Ae,i(e("input",{type:"number",step:"any","onUpdate:modelValue":n[8]||(n[8]=o=>t.value.diametro=o),id:"diametroTronco",placeholder:"Di\xE1metro do tronco (metros)"},null,512),[[p,t.value.diametro]]),e("fieldset",null,[Pe,Fe,i(e("input",{type:"text","onUpdate:modelValue":n[9]||(n[9]=o=>t.value.zona_geografica=o),id:"zona-geografica",placeholder:"Lugar donde se sit\xFAa"},null,512),[[p,t.value.zona_geografica]]),we,i(e("select",{onChange:n[10]||(n[10]=o=>t.value.ubicacion_parque=o.target.options[o.target.selectedIndex].text),"onUpdate:modelValue":n[11]||(n[11]=o=>t.value.idParque=o),name:"localizacion",id:"localizacion"},[Ne,(d(!0),u(x,null,V(E(S).parques,o=>(d(),u("option",{key:o.idDoc,value:o.idDoc},c(o.nombre),9,Te))),128))],544),[[P,t.value.idParque]]),Ie,i(e("input",{type:"number","onUpdate:modelValue":n[12]||(n[12]=o=>t.value.lat=o),step:"any",id:"latitud",placeholder:"Latitud"},null,512),[[p,t.value.lat,void 0,{number:!0}]]),Le,i(e("input",{type:"number",step:"any","onUpdate:modelValue":n[13]||(n[13]=o=>t.value.lng=o),id:"lng",placeholder:"Longitud"},null,512),[[p,t.value.lng,void 0,{number:!0}]])]),e("fieldset",null,[Be,Ge,i(e("textarea",{rows:"10","onUpdate:modelValue":n[14]||(n[14]=o=>t.value.descripcion=o),id:"descripcion",placeholder:"Descripci\xF3n"},null,512),[[p,t.value.descripcion]])]),e("fieldset",Me,[Re,e("div",Ze,[i(e("input",{type:"checkbox","onUpdate:modelValue":n[15]||(n[15]=o=>t.value.senlleira=o),name:"senlleira",id:"senlleira"},null,512),[[z,t.value.senlleira]]),y("\xA0 "),We]),e("div",Xe,[i(e("input",{type:"checkbox","onUpdate:modelValue":n[16]||(n[16]=o=>t.value.propuesta_senlleira=o),name:"propSenlleira",id:"propSenlleira"},null,512),[[z,t.value.propuesta_senlleira]]),y("\xA0 "),je])]),e("div",He,[i(e("input",{type:"checkbox","onUpdate:modelValue":n[17]||(n[17]=o=>t.value.publicado=o),name:"pubicado",id:"publicado"},null,512),[[z,t.value.publicado]]),Je]),e("fieldset",Ke,[(d(!0),u(x,null,V(U.value,o=>(d(),u("div",{class:"images",key:o.ref},[e("img",{class:"image",src:o.src,alt:""},null,8,Oe),e("button",{class:"btn-eliminar",onClick:T=>g(o.ref)}," Eliminar ",8,Qe)]))),128))]),h(M,{onEmitirFichero:N}),e("input",{type:"submit",value:"Editar Senlleira",disabled:t.value===null},null,8,Ye),s.value?(d(),u("div",el,"Gardando...")):q("",!0)])],32)])):q("",!0)],64)}}};var ol=R(ll,[["__scopeId","data-v-31b95a06"]]);const al={key:0,class:"formsenlleira"},sl={class:"form-background"},nl=["onSubmit"],tl={class:"h2-background"},rl=e("h2",null,"Formulario senlleira",-1),il={class:"data-senlleira --localizacion"},dl=e("legend",null,"Datos senlleira",-1),ul={class:"senlleira-nombre-cientifico"},cl=e("label",{for:"arbore",class:"form-label"},[y(" Nome da \xE1rbore "),e("span",{"data-set":"Campo obligatorio",class:"required-user"},"*")],-1),pl=e("label",{for:"especie",class:"form-label"},[y("Nome cient\xEDfico "),e("span",{"data-set":"Campo obligatorio",class:"required-user"},"*")],-1),ml=e("option",null,null,-1),_l=["value"],bl=e("label",{for:"nome",class:"form-label"}," Nome en galego",-1),fl=["value"],vl=e("label",{for:"nome",class:"form-label"}," Nome en castel\xE1n",-1),gl=["value"],hl=e("label",{for:"altura",class:"form-label"},"Altura (metros)",-1),yl=e("label",{for:"perimetroTronco",class:"form-label"},"Per\xEDmetro do tronco (metros)",-1),$l={class:"data-senlleira"},xl=e("legend",null,"Ubicaci\xF3n",-1),kl={class:"senlleira-localizacion"},Sl=e("label",{for:"zona",class:"form-label"}," Zona xeogr\xE1fica ",-1),Cl={class:"data-senlleira"},Ul={class:"senlleira-localizacion"},Vl=e("legend",null,"Parque",-1),ql=e("label",{for:"localizacion",class:"form-label"}," Ubicaci\xF3n parque",-1),Dl=e("option",{value:""},null,-1),El=["value"],zl={class:"data-senlleira"},Al=e("legend",null,"Descripci\xF3n",-1),Pl={class:"senlleira-localizacion"},Fl={class:"data-senlleira"},wl=e("legend",null,"Esta \xE1rbore \xE9",-1),Nl={class:"senlleira-arbore"},Tl=e("label",{class:"form-label",for:"senlleira"},"Senlleira",-1),Il=e("label",{class:"form-label",for:"propSenlleira"},"Proposta de senlleira",-1),Ll={class:"senlleira-arbore"},Bl=e("label",{class:"form-label",for:"publicado"},"Publicado",-1),Gl=e("legend",null,"Imaxe",-1),Ml={class:"data-senlleira"},Rl={key:0,style:{color:"white","background-color":"red","font-weight":"bold","font-size":"large"},class:"error"},Zl={key:0,class:"spinner"},Wl=["disabled"],Xl={__name:"FormSenlleira",emits:["cerrarForm"],setup(D,{emit:_}){const S=v(!1),$=()=>{_("cerrarForm")},s=K({genero:"",especie:"",idEspecie:0,ubicacion_parque:"",zona_geografica:"",nombre_arbol:"",nombre_comun:"",nombre_comun_gal:"",storage_ref:"",google_url:"",lng:"",lat:"",diametro:0,altura:0,descripcion:"",senlleira:!1,propuesta_senlleira:!1,publicado:!0});Q("form",s);const C=I(),b=O(),U=L(),A=v(!1),f=v({error:!1,message:""});U.setParques();let g=null;const t=v(!1),F=()=>{s.genero="",s.especie="",s.idEspecie=0,s.ubicacion_parque="",s.zona_geografica="",s.nombre_arbol="",s.nombre_comun="",s.nombre_comun_gal="",s.storage_ref="",s.google_url="",s.lat="",s.lng="",s.altura="",s.diametro="",s.descripcion="",s.senlleira=!1,s.propuesta_senlleira=!1,s.publicado=!0},w=async m=>{try{f.value={error:!1,message:""},g=m}catch(l){f.value.error=!0,f.value.message=l.message}},k=m=>{if(b.especies.length){const l=b.especies.find(n=>n.idDoc==m.target.value);s.genero=l==null?void 0:l.genero,s.especie=l==null?void 0:l.especie,s.nombre_comun=l==null?void 0:l.nombre_comun,s.nombre_comun_gal=l==null?void 0:l.nombre_comun_gal}},N=async()=>{S.value=!0;const m=await C.insertarArbore(s,g[0].name);if(b.especies.length){try{if(g===null||!g.length)throw new Error("Falta imagen")}catch(l){f.value.error=!0,f.value.message=l.message}if(g!==null&&m.id)try{f.value={error:!1,message:""},t.value=!0,A.value=!0;for(let n=0,a=g.length;n<a;n++)await C.subirFoto({ref:`Arbores/${m.id}`,file:g[n]});const l=`Arbores/${m.id}/${g[0].name}`;await C.google_url_save(m.id,l),t.value=!1,F()}catch(l){f.value.error=!0,f.value.message=l.message}finally{A.value=!1,S.value=!1}}m&&_("cerrarForm")};return b.setEspecies().then().catch(m=>alert(m)),(m,l)=>{const n=B("icono");return d(),u(x,null,[A.value?(d(),u("div",al,"Cargando...")):q("",!0),e("div",sl,[e("form",{id:"senlleiras",method:"post",enctype:"multipart/form-data",onSubmit:G(N,["prevent"])},[e("span",tl,[rl,h(n,{onClick:$,icon:["fa","xmark"]})]),e("fieldset",il,[dl,e("div",ul,[cl,i(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>s.nombre_arbol=a),type:"text",name:"arbore",id:"arbore",placeholder:"indica o nome da arbore",required:""},null,512),[[p,s.nombre_arbol]]),pl,i(e("select",{onChange:k,"onUpdate:modelValue":l[1]||(l[1]=a=>s.idEspecie=a),name:"especie",id:"especie"},[ml,(d(!0),u(x,null,V(E(b).especies,a=>(d(),u("option",{class:"especie-option",key:a.idDoc,value:a.idDoc,required:""},c(a.genero)+" "+c(a.especie),9,_l))),128))],544),[[P,s.idEspecie]]),bl,i(e("select",{onChange:k,"onUpdate:modelValue":l[2]||(l[2]=a=>s.idEspecie=a),name:"nome",id:"nombre-gallego"},[(d(!0),u(x,null,V(E(b).especies,a=>(d(),u("option",{key:a.idDoc,value:a.idDoc},c(a.nombre_comun_gal),9,fl))),128))],544),[[P,s.idEspecie]]),vl,i(e("select",{onChange:k,"onUpdate:modelValue":l[3]||(l[3]=a=>s.idEspecie=a),name:"nome",id:"nombre-castellano"},[(d(!0),u(x,null,V(E(b).especies,a=>(d(),u("option",{key:a.idDoc,value:a.idDoc},c(a.nombre_comun),9,gl))),128))],544),[[P,s.idEspecie]]),hl,i(e("input",{id:"altura",name:"altura","onUpdate:modelValue":l[4]||(l[4]=a=>s.altura=a),type:"number",step:"any",placeholder:"31"},null,512),[[p,s.altura,void 0,{number:!0}]]),yl,i(e("input",{id:"perimetroTronco",name:"perimetroTronco","onUpdate:modelValue":l[5]||(l[5]=a=>s.diametro=a),type:"number",step:"any",placeholder:"10,5"},null,512),[[p,s.diametro,void 0,{number:!0}]])])]),e("fieldset",$l,[xl,e("div",kl,[Sl,i(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>s.zona_geografica=a),type:"text",name:"zona",id:"zona",placeholder:"lugar de situacion"},null,512),[[p,s.zona_geografica]]),h(ee)])]),e("fieldset",Cl,[e("div",Ul,[Vl,ql,i(e("select",{onChange:l[7]||(l[7]=a=>s.ubicacion_parque=a.target.options[a.target.selectedIndex].text),"onUpdate:modelValue":l[8]||(l[8]=a=>s.idParque=a),name:"localizacion",id:"localizacion"},[Dl,(d(!0),u(x,null,V(E(U).parques,a=>(d(),u("option",{key:a.idDoc,value:a.idDoc},c(a.nombre),9,El))),128))],544),[[P,s.idParque]]),i(e("input",{type:"hidden","onUpdate:modelValue":l[9]||(l[9]=a=>s.ubicacion_parque=a)},null,512),[[p,s.ubicacion_parque]])])]),e("fieldset",zl,[Al,e("div",Pl,[i(e("textarea",{"onUpdate:modelValue":l[10]||(l[10]=a=>s.descripcion=a),name:"descripcion",id:"descripcion",cols:"30",rows:"10",placeholder:"breve descripci\xF3n da \xE1rbore"},null,512),[[p,s.descripcion]])])]),e("fieldset",Fl,[wl,e("div",Nl,[i(e("input",{type:"checkbox","onUpdate:modelValue":l[11]||(l[11]=a=>s.senlleira=a),name:"senlleira",id:"senlleira"},null,512),[[z,s.senlleira]]),y("\xA0 "),Tl,i(e("input",{type:"checkbox","onUpdate:modelValue":l[12]||(l[12]=a=>s.propuesta_senlleira=a),name:"propSenlleira",id:"propSenlleira"},null,512),[[z,s.propuesta_senlleira]]),y("\xA0 "),Il])]),e("div",Ll,[i(e("input",{type:"checkbox","onUpdate:modelValue":l[13]||(l[13]=a=>s.publicado=a),name:"pubicado",id:"publicado"},null,512),[[z,s.publicado]]),y("\xA0 "),Bl]),e("fieldset",null,[Gl,e("div",Ml,[h(M,{required:!0,onEmitirFichero:w}),f.value.error?(d(),u("div",Rl,c(f.value.message),1)):q("",!0)]),t.value?(d(),u("div",Zl,"Cargando....")):q("",!0)]),e("button",{disabled:S.value,class:"btn-form"},"Publicar Arbol",8,Wl)],40,nl)])],64)}}};const jl={__name:"CatalogoSenlleiras",setup(D){const _=v(!1);return(S,$)=>(d(),u("div",null,[e("button",{class:"admin-add",onClick:$[0]||($[0]=s=>_.value=!0)}," A\xF1adir \xE1rbore"),h(ol),_.value?(d(),Y(Xl,{key:0,onCerrarForm:$[1]||($[1]=s=>_.value=!1)})):q("",!0)]))}};var Yl=R(jl,[["__scopeId","data-v-0eee86e2"]]);export{Yl as default};
